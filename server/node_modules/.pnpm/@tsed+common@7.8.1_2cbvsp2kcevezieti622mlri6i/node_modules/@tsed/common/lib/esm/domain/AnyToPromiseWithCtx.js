import { AnyToPromise } from "@tsed/core";
export class AnyToPromiseWithCtx extends AnyToPromise {
    $ctx;
    constructor($ctx) {
        super();
        this.$ctx = $ctx;
    }
    isDone() {
        const { $ctx } = this;
        return $ctx?.isDone() || super.isDone();
    }
    async call(cb) {
        return super.call(() => cb(this));
    }
    destroy() {
        this.$ctx = null;
    }
    isCanceledResponse(process) {
        return process === this.$ctx.getResponse();
    }
}
//# sourceMappingURL=AnyToPromiseWithCtx.js.map