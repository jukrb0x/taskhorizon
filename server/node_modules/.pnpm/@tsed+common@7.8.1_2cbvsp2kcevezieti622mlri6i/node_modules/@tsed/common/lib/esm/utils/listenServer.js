export function listenServer(injector, server, hostInfo) {
    const { protocol, address, port } = hostInfo;
    const url = `${protocol}://${address}:${port}`;
    injector.logger.debug(`Start server on ${url}`);
    const promise = new Promise((resolve, reject) => {
        server.on("listening", resolve);
        server.on("error", reject);
    }).then(() => {
        const port = server.address().port;
        const info = { ...hostInfo, port };
        injector.logger.info(`Listen server on ${info.toString()}`);
        return info;
    });
    server.listen(port, address);
    return promise;
}
//# sourceMappingURL=listenServer.js.map