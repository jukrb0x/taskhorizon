"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultErrorFormatter = void 0;
const getPath_1 = require("./getPath");
function defaultErrorFormatter(error) {
    const value = JSON.stringify(error.data === undefined ? "undefined" : error.data);
    const join = (list) => list.filter(Boolean).join("").trim();
    error.dataPath = (0, getPath_1.getPath)(error);
    const [, indexPath, ...paths] = error.dataPath.split(".");
    const deepPaths = paths.length ? "." + paths.join(".") : "";
    if (error.collectionName) {
        switch (error.collectionName) {
            case "Array":
                return join([`${error.modelName || ""}[${indexPath}]${deepPaths}`, ` ${error.message}. Given value: ${value}`]);
            case "Map":
                return join([`Map<${indexPath}, ${error.modelName || ""}>${deepPaths}`, ` ${error.message}. Given value: ${value}`]);
            case "Set":
                return join([`Set<${indexPath}, ${error.modelName || ""}>${deepPaths}`, ` ${error.message}. Given value: ${value}`]);
        }
    }
    return join([!error.modelName && "Value", `${error.modelName || ""}`, error.dataPath, ` ${error.message}. Given value: ${value}`]);
}
exports.defaultErrorFormatter = defaultErrorFormatter;
//# sourceMappingURL=defaultErrorFormatter.js.map