"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mapCommanderArgs = void 0;
const core_1 = require("@tsed/core");
function mapValue(value, { type, itemType }) {
    if (!value) {
        return value;
    }
    switch (type) {
        case String:
            value = String(value);
            break;
        case Number:
            value = parseFloat(value);
            break;
        case Boolean:
            value = value === "true";
            break;
        case Array:
            value = String(value)
                .split(",")
                .map((value) => mapValue(value, { type: itemType }));
            break;
    }
    return value;
}
function mapCommanderArgs(args, commandArgs) {
    commandArgs = commandArgs.filter((arg) => !(0, core_1.isClass)(arg)).filter((arg) => !(0, core_1.isArray)(arg));
    let index = 0;
    return Object.entries(args).reduce((options, [arg, { defaultValue, type, itemType }]) => {
        const value = commandArgs[index] || defaultValue;
        index++;
        return {
            ...options,
            [arg]: mapValue(value, { type, itemType })
        };
    }, {});
}
exports.mapCommanderArgs = mapCommanderArgs;
//# sourceMappingURL=mapCommanderArgs.js.map