{"version":3,"file":"patchCommander.js","sourceRoot":"","sources":["../../../src/utils/patchCommander.ts"],"names":[],"mappings":"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","sourcesContent":["import chalk from \"chalk\";\nimport {Command} from \"commander\";\n\nfunction at(n: number) {\n  // ToInteger() abstract op\n  n = Math.trunc(n) || 0;\n  // Allow negative indexing from the end\n  if (n < 0) n += this.length;\n  // OOB access is guaranteed to return undefined\n  if (n < 0 || n >= this.length) return undefined;\n  // Otherwise, this is just normal property access\n  return this[n];\n}\n\nconst TypedArray = Reflect.getPrototypeOf(Int8Array);\nfor (const C of [Array, String, TypedArray]) {\n  if (C) {\n    Object.defineProperty((C as any).prototype, \"at\", {value: at, writable: true, enumerable: false, configurable: true});\n  }\n}\n\nconst helpInformation = Command.prototype.helpInformation;\n\nfunction colorizeSection(str: any, section: string) {\n  // eslint-disable-next-line prefer-const\n  let [before, after] = str.split(section);\n  after = after\n    .split(\"\\n\")\n    .map((line: string) => {\n      if (!line.match(/(\\w+):$/)) {\n        const [cmd, ...rest] = line.trim().split(\" \");\n        if (!cmd.startsWith(\"-\")) {\n          return [\" \", chalk.bold(chalk.blue(cmd)), ...rest].join(\" \");\n        }\n      }\n\n      return line;\n    })\n    .join(\"\\n\");\n\n  return [before, after].join(chalk.green(section));\n}\n\nCommand.prototype.helpInformation = function help() {\n  let str = helpInformation.call(this);\n\n  if (str.includes(\"Commands:\")) {\n    str = colorizeSection(str, \"Commands:\");\n  }\n\n  if (str.includes(\"Arguments:\")) {\n    str = colorizeSection(str, \"Arguments:\");\n  }\n\n  return (\n    \"\\n\" +\n    str\n      .replace(\"Usage:\", chalk.green(\"Usage:\"))\n      .replace(\"Options:\", chalk.green(\"Options:\"))\n      .replace(/<(\\w+)>/gi, `<${chalk.yellow(\"$1\")}>`)\n      .replace(/\\[(\\w+)]/gi, `[${chalk.cyan(\"$1\")}]`) +\n    \"\\n\"\n  );\n};\n"]}