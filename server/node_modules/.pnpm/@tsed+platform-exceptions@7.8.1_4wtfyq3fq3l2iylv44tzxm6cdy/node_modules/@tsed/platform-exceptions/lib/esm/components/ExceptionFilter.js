import { __decorate } from "tslib";
import { Exception } from "@tsed/exceptions";
import { Catch } from "../decorators/catch.js";
import { ErrorFilter } from "./ErrorFilter.js";
let ExceptionFilter = class ExceptionFilter extends ErrorFilter {
    catch(error, ctx) {
        const { response, logger, env } = ctx;
        const err = this.mapError(error, env);
        logger.error({
            error: err,
            stack: error.stack
        });
        response.setHeaders(this.getHeaders(error)).contentType("application/json").status(error.status).body(err);
    }
};
ExceptionFilter = __decorate([
    Catch(Exception)
], ExceptionFilter);
export { ExceptionFilter };
//# sourceMappingURL=ExceptionFilter.js.map