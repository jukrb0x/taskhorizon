{"version":3,"file":"UnderscoreEngine.js","sourceRoot":"","sources":["../../../src/components/UnderscoreEngine.ts"],"names":[],"mappings":";AAAA,OAAO,EAAC,UAAU,EAAC,MAAM,0BAA0B,CAAC;AACpD,OAAO,EAAC,MAAM,EAAC,MAAM,UAAU,CAAC;AAGhC,IAAa,gBAAgB,GAA7B,MAAa,gBAAiB,SAAQ,MAAM;IAC1C,KAAK,CAAC,MAAM,CAAC,QAAgB,EAAE,OAAY;QACzC,MAAM,GAAG,GAAW,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC;QACnE,OAAO,GAAG,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;IAChC,CAAC;IAES,aAAa,CAAC,QAAgB,EAAE,OAAY;QACpD,MAAM,QAAQ,GAAQ,EAAE,CAAC;QAEzB,KAAK,MAAM,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE;YACtC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;SACrE;QAED,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAE5B,OAAO,OAAO,CAAC;IACjB,CAAC;IAES,QAAQ,CAAC,QAAgB,EAAE,OAAY;QAC/C,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACvD,CAAC;CACF,CAAA;AArBY,gBAAgB;IAD5B,UAAU,CAAC,YAAY,CAAC;GACZ,gBAAgB,CAqB5B;SArBY,gBAAgB","sourcesContent":["import {ViewEngine} from \"../decorators/viewEngine\";\nimport {Engine} from \"./Engine\";\n\n@ViewEngine(\"underscore\")\nexport class UnderscoreEngine extends Engine {\n  async render(template: string, options: any) {\n    const tpl: string = await this.compile(template, options)(options);\n    return tpl.replace(/\\n$/, \"\");\n  }\n\n  protected $cacheOptions(template: string, options: any): any {\n    const partials: any = {};\n\n    for (const partial in options.partials) {\n      partials[partial] = this.engine.template(options.partials[partial]);\n    }\n\n    options.partials = partials;\n\n    return options;\n  }\n\n  protected $compile(template: string, options: any): (options: any) => Promise<string> {\n    return this.engine.template(template, null, options);\n  }\n}\n"]}