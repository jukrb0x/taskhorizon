{"version":3,"file":"afterDeserialize.js","sourceRoot":"","sources":["../../../src/decorators/afterDeserialize.ts"],"names":[],"mappings":";;;AAAA,yCAA2D;AAM3D;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BG;AACH,SAAgB,gBAAgB,CAAC,EAA4B;IAC3D,OAAO,IAAA,qBAAY,EAAC,CAAC,UAAU,EAAE,EAAE;QACjC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC;IACtD,CAAC,CAAC,CAAC;AACL,CAAC;AAJD,4CAIC","sourcesContent":["import {JsonEntityFn, JsonHookContext} from \"@tsed/schema\";\n\nexport interface AfterDeserializeCallback {\n  (value: any, ctx: JsonHookContext): any;\n}\n\n/**\n * Call the function after JsonMapper.\n *\n * ## Example\n *\n * ```typescript\n * @AfterDeserialize((data: Model) => { // After deserialize get the instance class\n *    if (data.prop1 === 'VALUE' && data.prop2 !== 'VALUE2') {\n *      throw BadRequest('MyMessage'); // or throw a ValidationError\n *    } else {\n *      data.prop2 = 'VALUE2';\n *      return data;\n *    }\n * })\n * class Model {\n *    @Property()\n *    prop1: string;\n *    @Property()\n *    prop2: string;\n * }\n * ```\n *\n * @returns {Function}\n * @decorator\n * @schema\n * @property\n * @param cb\n */\nexport function AfterDeserialize(cb: AfterDeserializeCallback): ClassDecorator {\n  return JsonEntityFn((storedJson) => {\n    storedJson.schema.$hooks.on(\"afterDeserialize\", cb);\n  });\n}\n"]}