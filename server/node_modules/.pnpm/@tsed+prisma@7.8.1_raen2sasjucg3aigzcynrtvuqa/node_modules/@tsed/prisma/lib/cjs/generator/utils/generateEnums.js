"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateEnums = void 0;
const tslib_1 = require("tslib");
const core_1 = require("@tsed/core");
const DmmfEnum_1 = require("../domain/DmmfEnum");
const path_1 = tslib_1.__importDefault(require("path"));
const generateDocuments_1 = require("./generateDocuments");
const transformEnumsToEnums_1 = require("../transform/transformEnumsToEnums");
const generateOutputsBarrelFile_1 = require("./generateOutputsBarrelFile");
function generateEnums(dmmf, project, baseDirPath) {
    const enumsMap = (0, core_1.toMap)(dmmf.datamodel.enums, "name");
    const enums = DmmfEnum_1.DmmfEnum.getEnums(dmmf, enumsMap);
    const enumsDirPath = path_1.default.resolve(baseDirPath, "enums");
    const enumsDirectory = project.createDirectory(enumsDirPath);
    const enumsIndex = enumsDirectory.createSourceFile(`index.ts`, undefined, { overwrite: true });
    const exportedEnums = (0, generateDocuments_1.generateDocuments)(enums, enumsDirectory, (document) => (0, transformEnumsToEnums_1.transformEnumsToEnums)(document));
    if (enums.length) {
        return !!(0, generateOutputsBarrelFile_1.generateOutputsBarrelFile)(enumsIndex, exportedEnums);
    }
    return false;
}
exports.generateEnums = generateEnums;
//# sourceMappingURL=generateEnums.js.map