{"version":3,"file":"getInheritedStores.js","sourceRoot":"","sources":["../../../src/utils/getInheritedStores.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,WAAW,EAAO,MAAM,YAAY,CAAC;AAE7C,OAAO,EAAC,kBAAkB,EAAC,MAAM,sBAAsB,CAAC;AAExD;;;;GAIG;AACH,MAAM,UAAU,kBAAkB,CAAC,MAAuB;IACxD,MAAM,KAAK,GAAmB,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,kBAAkB,CAAiB,MAAM,CAAC,CAAC;IAEnG,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE;QACrB,KAAK,CAAC,UAAU,GAAG,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC;aACzC,OAAO,EAAE;aACT,MAAM,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE;YACzB,OAAO,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;QACvD,CAAC,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;KACjB;IAED,OAAO,KAAK,CAAC,UAAU,CAAC;AAC1B,CAAC","sourcesContent":["import {ancestorsOf, Type} from \"@tsed/core\";\nimport type {JsonClassStore} from \"../domain/JsonClassStore\";\nimport {getJsonEntityStore} from \"./getJsonEntityStore\";\n\n/**\n * Return store and his inherited stores\n * @param target\n * @ignore\n */\nexport function getInheritedStores(target: Type<any> | any): Map<Type<any>, JsonClassStore> {\n  const store: JsonClassStore = target.isStore ? target : getJsonEntityStore<JsonClassStore>(target);\n\n  if (!store.$inherited) {\n    store.$inherited = ancestorsOf(store.target)\n      .reverse()\n      .reduce((context, model) => {\n        return context.set(model, getJsonEntityStore(model));\n      }, new Map());\n  }\n\n  return store.$inherited;\n}\n"]}